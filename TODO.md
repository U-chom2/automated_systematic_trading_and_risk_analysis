# TODO - MVP実装タスクリスト

## 🎯 MVP概要
**4つのコアモジュールによるシンプルな自動株式取引システム**

1. **collectors** - 東証グロースから100億円以下の企業を定期収集
2. **analyzers** - AI判別エンジンで買い・売り・保有を決定
3. **recorders** - 取引実行と履歴記録
4. **trainers** - 判別AIの継続学習

## ✅ 完了した大規模リファクタリング

### アーキテクチャ簡素化 (2025-01-10)
- ✅ 新4モジュール構造作成 (`src/collectors/`, `src/analyzers/`, `src/recorders/`, `src/trainers/`)
- ✅ 既存モジュール移行完了
- ✅ Repository抽象層（75メソッド）削除
- ✅ Infrastructure実装層削除  
- ✅ Application/UseCase層（2639行）削除
- ✅ 単体テスト大幅削除、統合テストのみ保持
- ✅ API複雑性削除（health APIのみ保持）

### 削減効果
- **実装必要メソッド数**: 150+ → 約20
- **テストファイル数**: 35 → 8  
- **アーキテクチャ層数**: 5層 → 単層モジュール
- **開発複雑性**: 大幅削減

## 🚨 最優先（MVP完成に必要）

### 1. Collectors モジュール完成
- [ ] **growth_screener.py の機能拡張**
  - Yahoo Finance APIエラーハンドリング強化
  - 企業データ収集の安定化
  - 100億円以下フィルタリング精度向上

- [ ] **定期実行機能**
  - スケジューラー統合 (`scheduler.py`)
  - 日次・週次実行設定
  - 祝日カレンダー対応

### 2. Analyzers モジュール完成  
- [ ] **AIモデル統合**
  - `train/models/rl/ppo_nikkei_model_20250909_232115.zip` の活用
  - 予測精度検証
  - buy/sell/holdシグナル生成

- [ ] **stock_analyzer.py 機能強化**
  - センチメント分析統合（現在は空実装）
  - リアルタイム分析機能
  - リスク評価ロジック

### 3. Recorders モジュール完成
- [ ] **実取引API連携**
  - 証券会社API統合準備
  - 注文実行機能
  - ポジション管理

- [ ] **データ永続化**
  - SQLite/PostgreSQL選択・設定
  - 取引履歴保存
  - パフォーマンス追跡

### 4. Trainers モジュール完成
- [ ] **AI学習パイプライン**
  - `train/main_ppo.py` との統合完成
  - 定期学習スケジューラー
  - モデル性能評価

## 🔴 高優先（MVP運用開始後）

### 5. データソース統合
- [ ] **J-Quants API本格活用**
  - `test_jquants.py` の成果を活用
  - リアルタイム株価取得
  - 財務データ自動更新

- [ ] **Yahoo Finance安定化**
  - API制限対応
  - データ品質チェック
  - フォールバック機能

### 6. 運用監視・アラート
- [ ] **システム監視**
  - ログ集約・分析
  - エラー通知機能
  - パフォーマンス監視

- [ ] **トレーディング監視**
  - 日次P&Lレポート
  - リスクアラート
  - 異常検知

## 🟡 中優先（スケール時）

### 7. UI/API拡張
- [ ] **管理画面**
  - 取引状況ダッシュボード
  - 設定変更インターフェース
  - パフォーマンス可視化

- [ ] **REST API拡張**
  - 基本的な取引操作API
  - データ取得API
  - 設定変更API

### 8. 高度な機能
- [ ] **ポートフォリオ最適化**
  - リスク分散アルゴリズム
  - 動的ポジションサイジング
  - リバランシング自動化

- [ ] **バックテスト機能**
  - 歴史的データでの戦略検証
  - パフォーマンス分析
  - 戦略比較

## 🔵 低優先（将来の拡張）

### 9. 外部統合
- [ ] **複数証券会社対応**
- [ ] **仮想通貨取引対応**
- [ ] **海外株式対応**

### 10. 高度なAI機能
- [ ] **深層強化学習**
- [ ] **マルチモーダル分析**（ニュース + 価格）
- [ ] **説明可能AI**

## 📋 開発原則（継続）

### MVP開発原則
- **テストは統合テストのみ** - 単体テストは不要
- **動作するコードを優先** - 完璧な設計より動作確認
- **最小機能で価値創出** - 複雑な抽象化を避ける
- **同一ファイル継続編集** - 新ファイル作成を最小限に

### 技術要件
- **パッケージ管理**: `uv`のみ使用、`pip`禁止
- **型ヒント**: 必須
- **行長制限**: 88文字
- **ログ出力**: vibelogger使用
- **エラーハンドリング**: try-except + raise必須

## 🚀 次のアクション

### 今週の目標
1. **Collectorsモジュール**の企業データ収集を確実に動作させる
2. **Analyzersモジュール**でAIモデル予測を統合する  
3. **Main trading system**での4モジュール連携を確認

### 今月の目標
- MVP最小版での実際の株式分析開始
- 小額での実取引テスト準備
- 基本的なパフォーマンス測定

### 成功指標
- 毎日安定してグロース株企業データを収集
- AIモデルが明確なbuy/sell/holdシグナルを生成
- 取引記録が正確に保存される
- AIモデルが継続的に学習・改善される