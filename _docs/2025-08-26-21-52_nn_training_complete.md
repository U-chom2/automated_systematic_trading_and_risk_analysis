# ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨“ç·´å®Œäº†
ä½œæˆæ—¥æ™‚: 2025-08-26 21:52

## âœ… è¨“ç·´å®Ÿè¡Œçµæœ

### æˆåŠŸã—ãŸè¨“ç·´
- **è¨“ç·´ãƒ‡ãƒ¼ã‚¿**: ç±³å›½ä¸»è¦10éŠ˜æŸ„ã‹ã‚‰200ã‚µãƒ³ãƒ—ãƒ«ç”Ÿæˆ
- **è¨“ç·´/æ¤œè¨¼åˆ†å‰²**: 160å€‹ï¼ˆè¨“ç·´ï¼‰/ 40å€‹ï¼ˆæ¤œè¨¼ï¼‰
- **è¨“ç·´ã‚¨ãƒãƒƒã‚¯**: 73ï¼ˆæ—©æœŸåœæ­¢ã«ã‚ˆã‚Š200ã‹ã‚‰çŸ­ç¸®ï¼‰
- **æœ€çµ‚æ¤œè¨¼æå¤±**: 0.00180ï¼ˆéå¸¸ã«è‰¯å¥½ï¼‰
- **å¹³å‡çµ¶å¯¾èª¤å·®**: 2.96%

### ãƒ¢ãƒ‡ãƒ«æ€§èƒ½
- ä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£å¸‚å ´: 4.25%ã®æåˆ‡ã‚Šå¹…
- é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£å¸‚å ´: 1.04%ã®æåˆ‡ã‚Šå¹…
- é€šå¸¸å¸‚å ´: 3.54%ã®æåˆ‡ã‚Šå¹…

## ğŸ§¹ ã‚³ãƒ¼ãƒ‰æ•´ç†å†…å®¹

### å‰Šé™¤ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«
- `generate_training_data.py` (ãƒã‚°ã‚ã‚Šç‰ˆ) â†’ å‰Šé™¤
- `generate_training_data_fixed.py` â†’ `generate_training_data.py`ã«ãƒªãƒãƒ¼ãƒ 
- `generate_mini_training_data.py` â†’ å‰Šé™¤ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
- `train_mini_model.py` â†’ å‰Šé™¤ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

### æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
train/
â”œâ”€â”€ README.md                        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ run_training.sh                  # è‡ªå‹•å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ generate_training_data.py        # ç±³å›½æ ªãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆå‹•ä½œç¢ºèªæ¸ˆã¿ï¼‰
â”œâ”€â”€ generate_japan_training_data.py  # æ—¥æœ¬æ ªãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”œâ”€â”€ create_mock_data.py             # ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”œâ”€â”€ train_risk_model.py             # ãƒ¢ãƒ‡ãƒ«è¨“ç·´
â”œâ”€â”€ test_model.py                   # ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ train_data.json            # è¨“ç·´ãƒ‡ãƒ¼ã‚¿ï¼ˆ160ã‚µãƒ³ãƒ—ãƒ«ï¼‰
â”‚   â”œâ”€â”€ val_data.json              # æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ï¼ˆ40ã‚µãƒ³ãƒ—ãƒ«ï¼‰
â”‚   â””â”€â”€ mock_*.json                # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â””â”€â”€ models/
    â”œâ”€â”€ best_risk_model.pth        # æœ¬ç•ªç”¨ãƒ¢ãƒ‡ãƒ«
    â”œâ”€â”€ training_history.png       # è¨“ç·´å±¥æ­´ã‚°ãƒ©ãƒ•
    â””â”€â”€ predictions_vs_actual.png  # äºˆæ¸¬ç²¾åº¦ã‚°ãƒ©ãƒ•
```

## ğŸ“ CLAUDE.mdæ›´æ–°å†…å®¹
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼š
- **ãƒã‚°ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯æ®‹ã•ãªã„** - å‹•ä½œç¢ºèªæ¸ˆã¿ã®ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’ä¿æŒã™ã‚‹
- ãƒ†ã‚¹ãƒˆç”¨ã®ä¸€æ™‚çš„ãªã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ã™ã‚‹

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
```bash
cd train
./run_training.sh  # å…¨è‡ªå‹•å®Ÿè¡Œ
```

### å€‹åˆ¥å®Ÿè¡Œ
```bash
# ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
uv run python generate_training_data.py      # ç±³å›½æ ª
uv run python generate_japan_training_data.py # æ—¥æœ¬æ ª
uv run python create_mock_data.py           # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿

# ãƒ¢ãƒ‡ãƒ«è¨“ç·´
uv run python train_risk_model.py

# ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
uv run python test_model.py
```

## ğŸ¯ æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨

```python
from src.analysis_engine.risk_model import RiskModel

# ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰
risk_model = RiskModel()
risk_model.load_model('train/models/best_risk_model.pth')

# äºˆæ¸¬å®Ÿè¡Œ
features = {
    'historical_volatility': 0.25,
    'atr': 14.5,
    'rsi': 65,
    'volume_ratio': 1.5,
    'ma_deviation': 0.08,
    'beta': 1.2
}
prediction = risk_model.predict(features)
stop_loss = prediction.stop_loss_percentage * 100
print(f"æ¨å¥¨æåˆ‡ã‚Šå¹…: {stop_loss:.2f}%")
```

## âš ï¸ æ³¨æ„äº‹é …
- talibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯Python 3.13ã§äº’æ›æ€§å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€æ‰‹å‹•å®Ÿè£…ã‚’ä½¿ç”¨
- yfinanceã®APIã¯`Ticker.history()`ã‚’ä½¿ç”¨ï¼ˆ`download()`ã‚ˆã‚Šå®‰å®šï¼‰
- æ—¥ä»˜å‡¦ç†ã¯`pd.Timestamp`ã§çµ±ä¸€ã—ã¦å‹ã®ä¸ä¸€è‡´ã‚’å›é¿